{% if is_admin == True %}
  {% include 'base.html' with profile="/aky/admin/profile" home="/aky/admin" %}
{% else %}
  {% include 'base.html' with profile="/aky/etudiant/profile" home="/aky/etudiant" %}
{% endif %}

{% load static %}
<style>
.filter_search {
     display: flex;
     flex-direction: row;
     justify-content: center;
     flex-wrap: nowrap;
     border-bottom: 1px solid rgb(194, 193, 191);
     padding-bottom: 16px;
}
.filter_btn {
     display: flex;
     border: 1px rgb(165, 163, 161) solid;
     margin-top: 50px;
     border-radius: 5px;
     padding: 10px 20px;
     margin-left: 20px;
}
.filter_btn:hover {
     background-color: rgb(155, 155, 252);
     cursor: pointer;
}
.filter {
     height: 25px;
     width: 30px;
     margin: 0px;
     padding-top:2px;
}

.filter_text {
     color: black;
     padding-top: -2px;
     font-size: 20px;
}
.result {
     flex-grow: 1;
     margin-left: 50px;
     padding-top: 80px;
     padding-left: 50px;
}

.form_search {
     flex-grow: 2;
     display: flex;
     justify-content: center;
     align-items: center;
     margin-left: 20px;
     margin-top: 50px;
}
input[type="text"] {
     padding: 12px;
     font-family: Cambria;
     border: none;
     height: 50px;
     background-color: rgb(175, 175, 174);
     border-radius: 4px 0 0 4px;
     font-size: 20px;
     width: 270px;
}
button[type="submit"] {
     font-family: Arial;
     padding: 8px 16px;
     background-color: rgb(139, 139, 253);
     color: white;
     border: none;
     border-radius: 0 4px 4px 0;
     cursor: pointer;
     font-size: 20px;
     height: 50px;
}
input[type="checkbox"] {
     margin: 8px;
}
label:hover {
  cursor: pointer;
}
.flex {
     display: flex;
}
.hidden {
     display: none;
}
.filter_form {
    padding: 20px;
    width: 250px;
    font-family: Arial;
    border-right: 1px solid black;
    height: 100vh;
    transition: 0.5s ease;
}
.filter_bloc {
  margin-bottom: 20px;
}
.filter_bouton {
     padding: 15px 20px;
     background-color: rgb(139, 139, 253);
     font-size: 20px;
     color: white;
     font-family: Arial;
     border: none;
     border-radius: 5px;
}
.all_btn {
    border: none;
    margin-top: 50px;
    border-radius: 5px;
    background-color: rgb(139, 139, 253);
    padding: 10px 20px;
    margin-left: 20px;
    font-size: 20px;
    cursor: pointer;
}
.filter_bouton:hover {
  cursor: pointer;
  background-color: blue;
}
.mem_img {
     height: 120px;
     width: 100px;
     margin: 15px 20px;
}
.mem {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    column-gap: 26px;
    padding: 12px;
    margin-bottom: 8px;
}
.mem:hover {
   background-color: whitesmoke;
}
.mem_info {
  justify-self: start;
  grid-column: 1 / span 3;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  justify-items: start;
  gap: 10px;
}
.mem_props {
  padding-top: 20px;
  grid-column: 2 / span 4;
  justify-self: start;
}
.view_btn {
  grid-column: 5 / span 1;
  justify-self: end;
  align-self: center;
}
.consulter_btn {
    background: rgb(139, 139, 253);
    color: white;
    border: none;
    padding: 15px 20px;
    font-size: 15px;
    border-radius: 5px;
}
.consulter_btn:hover {
  cursor: pointer;
}
span {
     font-size: 18px;
     font-weight: 400;
}
p {
  font-weight: bold;
}
</style>
<main>

  {% block content %}

<div class="filter_search">
  <button class="filter_btn" id="filter">
    <img src="{% static 'application_web_aky/images/filtre.png' %}" alt="" class="filter">
    <div class="filter_text">Filtrer</div>
  </button>
  
    <a href="?all=True">
      <button class="all_btn">Tous les mémoires</button>
    </a>
  
  <form class="form_search " method="POST" action="./">
    {% csrf_token %}
    <input type="text" placeholder="Rechercher..." name="mot_cle">
    {% for memoire in memoires %}
      <input type="hidden" name="precedent" value={{memoire.id}}>
    {% endfor %}
    <button type="submit">Soumettre</button>
  </form>

  <div class="result">
    {% if resultats > 1 %}
       {{resultats}} résultats
    {% else %}
       {{resultats}} résultat
    {% endif %}
  </div>
</div>

  <div class="flex">

    <div>
      <form class="filter_form hidden"  id="filter_form" method="POST" action="./">
        {% csrf_token %}
        <fieldset class="filter_bloc">
          <legend>Année</legend>
          <label><input type="checkbox" name="annee" value="2021"> 2021</label><br>
          <label><input type="checkbox" name="annee" value="2022"> 2022</label><br>
          <label><input type="checkbox" name="annee" value="2023"> 2023</label><br>
        </fieldset>
        <fieldset class="filter_bloc">
          <legend>Parcours</legend>
          <label><input type="checkbox" name="parcours" value="génie informatique"> Génie informatique</label><br>
          <label><input type="checkbox" name="parcours" value="génie civil"> Génie civil</label><br> 
          <label><input type="checkbox" name="parcours" value="big data"> Big data</label><br>
        </fieldset>
        <fieldset class="filter_bloc">
          <legend>Thème</legend>
          <label><input type="checkbox" name="theme" value="santé"> Santé</label><br>
          <label><input type="checkbox" name="theme" value="economie"> Économie</label><br>
          <label><input type="checkbox" name="theme" value="agriculture"> Agriculture</label><br>
          <label><input type="checkbox" name="theme" value="transport"> Transport</label><br>
          <label><input type="checkbox" name="theme" value="education"> Education</label><br>
        </fieldset>
        <center>
          <input class="filter_bouton" type="submit" value="Appliquer">
        </center>
        {% for memoire in memoires %}
          <input type="hidden" name="precedent" value={{memoire.id}}>
        {% endfor %}
      </form>

    </div>

    <div class="mem_list">
        {% for memoire in memoires %}
        <div class="mem">
          <div class="mem_info">
            <div class="img">
              <img src="{% static 'application_web_aky/images/pdflogo.png' %}" alt="" class="mem_img">
            </div>
            <div class="mem_props">
              <p class="block"><span>Numéro d'ordre</span>: {{memoire.num_ordre}} </p>
              <p class="block"><span>Auteur du mémoire</span>: {{memoire.auteur}} </p>
              <p class="block"><span>Titre du mémoire</span>: {{memoire.titre}} </p>
              <p class="block"><span>Brève description du projet</span>: {{memoire.description | truncatewords:20}}</p>
            </div>
          </div>
          <div class="view_btn">
            <a href="/aky/consulter/{{memoire.id}}">
              <button class="consulter_btn">Consulter</button>
            </a>
          </div>
        </div>
        {% endfor %}
    </div>

  </div>
  
  <script>
    const filterButton = document.getElementById('filter');
    const filterForm = document.getElementById('filter_form');

    filterButton.onclick=(e)=>{
      filterForm.classList.toggle("hidden");
    }
  </script>
  {% endblock %}

  
</main>
{% include 'footer.html' %}